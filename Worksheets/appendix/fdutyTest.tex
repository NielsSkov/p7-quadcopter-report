\chapter{Duty-to-Speed Test}\label{app:duty} 
\textbf{Name: Group 733}\\
\textbf{Date: 5/12 - 2016}

\subsubsection{Purpose}
Finding the relation between the duty cycle sent to the motor controller and the rotational speed of the motors, to be able to select the appropriate duty once the control actions are calculated.

\subsubsection{List of Equipment}
\begin{table}[H]
    \centering
	\begin{tabular}{|l|l|p{4.3cm}|}
		\hline%------------------------------------------------------------------------------------------------------------
		\textbf{Instrument}                          &  \textbf{AAU-no.}  &  \textbf{Type}                       \\
		\hline%------------------------------------------------------------------------------------------------------------
		Tachometer                                   &  08246             &  Shimpo DT-205		                   \\
		\hline%------------------------------------------------------------------------------------------------------------
	    Power Supply (11.1 V)                        &  64565             &  ES 030-5                 \\
		\hline%------------------------------------------------------------------------------------------------------------
		Processing Unit                              &  N/A               & Arduino Mega 2560    \\
		\hline%------------------------------------------------------------------------------------------------------------
		Motor                                        &  N/A               & Multistar 2213-935     \\
		\hline%------------------------------------------------------------------------------------------------------------
		Motor Speed Controller                       &  N/A               &  -      \\
		\hline%------------------------------------------------------------------------------------------------------------
		Propeller                                    &  N/A               & Turnigy 1045R     \\
		\hline%------------------------------------------------------------------------------------------------------------	
	\end{tabular}
\end{table}

\subsubsection{Procedure}
\begin{enumerate}
	\item Connect the power supply to the motor controller and the Arduino Mega to the computer though the programmer. One PWM pin and GND pin from the board must be connected to the driver signal cables yellow and brown respectively. 
	\item Run the program with a fixed PWM duty for each test. The duty can be set from from 128 to 255.
	\item Wait for the speed to stabilize and measure it with the tachometer. 
	\item Repeat with a different duty cycle.
\end{enumerate}

\subsubsection{Results}
\begin{table}[H]
	\centering
	\begin{tabular}{|l|l|l|l|p{4.3cm}|}
		\hline%------------------------------------------------------------------------------------------------------------
		\textbf{Duty}    & \textbf{Motor Speed [rpm]} & \textbf{Motor Speed [rad/s]} \\ 
		\hline%------------------------------------------------------------------------------------------------------------
		160                & 2210         	   &  231.43                                       \\
		\hline%------------------------------------------------------------------------------------------------------------
		 165      &  2554 						       &  267.45				                \\
		\hline%------------------------------------------------------------------------------------------------------------
         170      &  2820 						       &  295.31				                \\
         \hline%------------------------------------------------------------------------------------------------------------
         175       &  3107                               &  325.36   			                  \\
        \hline%------------------------------------------------------------------------------------------------------------
		 180       &  3381                               &  354.05   			                  \\
		\hline%------------------------------------------------------------------------------------------------------------
		185    & 3740                               &  391.65  			                       \\
		\hline%------------------------------------------------------------------------------------------------------------
		190   &    4035                               &  422.54                                \\
		\hline%------------------------------------------------------------------------------------------------------------
		195   &  4345 						       &  455.01				                   \\
		\hline%------------------------------------------------------------------------------------------------------------
		200 &  4620                               &  483.81    			                    \\
		\hline%------------------------------------------------------------------------------------------------------------
		 205   &    4882                               &  511.24                               \\
		\hline%------------------------------------------------------------------------------------------------------------
	\end{tabular}
	\caption{Results obtained when applying a duty cycle from 160 to 205 to the motor controllers.}
\end{table}

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.7]{figures/dutyGraph}
	\caption{Linear relation between rotational speed of the motors and duty sent to the ESCs.}
	\label{fig:dutyGraph}
\end{figure}

The final equation to be able to set the needed duty depending on the required rotational speed of the motor, blue line in \autoref{fig:dutyGraph}, is given by
\begin{flalign}
    \mathrm{duty_i}= 0.1598 \omega_{\mathrm{i}} +122.79
\end{flalign}