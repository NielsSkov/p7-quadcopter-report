\section{Network}\label{sec:network}
The wireless network between the external sensor and the quadcopter influences the performance of the controller. This influence is considered and two effects, delay and missed packets, are examined.

%The effects on the control performance of the usage of the wireless network to get the sensor data can be divided in two. These are the delay and the packet loss. 

The theoretical modeling of these influences has been studied by several researchers with the purpose of understanding how the stability of the control system is affected when a network is used \cite{ling}, \cite{nirupam}. However, these approaches often lead to an increase in the complexity as the network effect is taken into account in the model of the system.

Stability of the system when influenced by the network is instead analyzed using the network simulator TrueTime \cite{TrueTimeNew}. It provides the ability to simulate the network model, the controller design and the system model together. This approach makes it possible to design the controllers taking into account the network effects and, thus, ensuring that stability is achieved.

The delay is modeled in the network simulation as constant for all samples. Its value is calculated by adding two time intervals. The first is the time needed for the transmission of the data, that is, the time elapsed since the data is acquired until it is available for the controller. This is a fixed delay formed by a combination of transmission and code execution times. The second is the maximum time until the controller utilizes the data. It is estimated as the sampling time minus the execution time of the control loop. This yields the maximum delay, thereby considering the worst case scenario.

The missed packets, defined as a constant probability of the controller using old data, is found experimentally by sending a large amount of packets and examining how many control loops run with old data. 
% In the experiment, it has been found that more packets are received than control loops are executed, that is, the most recent packet is always available for the controller and, therefore, the packet loss probability is zero.